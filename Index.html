import React, { useState, useEffect, useRef } from 'react';
import React, { useState, useEffect, useRef } from 'react';
import { 
  Shield, 
  Cpu, 
  Cloud, 
  Settings, 
  ChevronRight, 
  Menu, 
  X, 
  MessageCircle, 
  Camera, 
  CreditCard, 
  Smartphone,
  CheckCircle2,
  MapPin, 
  Phone, 
  Mail, 
  BarChart3, 
  Users, 
  Database, 
  Lock, 
  Globe, 
  Bell, 
  QrCode, 
  Zap, 
  Tag, 
  Package, 
  Layers, 
  ChevronLeft, 
  Monitor, 
  Printer, 
  Scan, 
  Send, 
  Loader2, 
  AlertCircle,
  User,
  Bot,
  FileText
} from 'lucide-react';

// --- Global Config & AI API Setup ---
const apiKey = ""; 
const modelName = "gemini-2.5-flash-preview-09-2025";

const systemPrompt = `คุณคือผู้ช่วยอัจฉริยะ (AI Customer Support) ของบริษัท "Park Innovation Plus" ผู้นำด้านระบบบริหารจัดการที่จอดรถอัจฉริยะ
ข้อมูลบริษัทและผลิตภัณฑ์ที่คุณต้องแนะนำ:
1. แพ็กเกจ Begin (2,500/ด.): มีคอมพิวเตอร์, Barcode Reader, Printer
2. แพ็กเกจ Standard (3,500/ด.): เพิ่มระบบ Control Barrier Gate x2 และ Control Camera x2
3. แพ็กเกจ Standard Advance (5,500/ด.): ครบชุดด้วย Camera x2, Barrier Gate x2 พร้อมระบบควบคุม
4. แพ็กเกจ Custom Enterprise: ปรับแต่งได้ตามต้องการ มีตู้ Kiosk Auto In-Out

จุดเด่น: ใช้ AI LPR (อ่านป้ายทะเบียนแม่นยำ 99.9%), ระบบ Cloud Dashboard ดูข้อมูลได้ทั่วโลก, บริการหลังการขาย 24/7 (เข้าหน้างานภายใน 4 ชม.)
ข้อมูลติดต่อ: 
- เบอร์โทรศัพท์: 06-2661-4562, 08-0165-9459
- ที่อยู่: 215/45 หมู่ที่ 3 ตําบลสําโรง อําเภอพระประแดง จังหวัดสมุทรปราการ 10130
- อีเมล: parkinnovationplus@gmail.com

บุคลิก: สุภาพ, เป็นมืออาชีพ, มั่นใจในเทคโนโลยี, ใช้ภาษาไทยที่ดูหรูหราและเชื่อถือได้สำหรับลูกค้าระดับ Enterprise`;

// --- Custom Circuit Logo Component ---
const BrandLogo = ({ className = "w-10 h-10" }) => (
  <svg viewBox="0 0 100 100" className={className} fill="none" xmlns="http://www.w3.org/2000/svg">
    <filter id="glow"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    <path d="M30 80V25H60C70 25 75 32 75 42C75 52 70 59 60 59H45" stroke="#38BDF8" strokeWidth="4" strokeLinecap="round" filter="url(#glow)"/>
    <path d="M45 59V80" stroke="#38BDF8" strokeWidth="4" strokeLinecap="round" filter="url(#glow)"/>
    <circle cx="30" cy="80" r="3" fill="#38BDF8" filter="url(#glow)"/><circle cx="45" cy="80" r="3" fill="#38BDF8" filter="url(#glow)"/>
    <path d="M35 35H55" stroke="#38BDF8" strokeWidth="2" strokeLinecap="round" opacity="0.6"/>
    <path d="M35 45H65" stroke="#38BDF8" strokeWidth="2" strokeLinecap="round" opacity="0.6"/>
    <circle cx="65" cy="45" r="2" fill="#38BDF8" opacity="0.6"/>
    <rect x="70" y="38" width="20" height="6" fill="#38BDF8" filter="url(#glow)"/><rect x="77" y="31" width="6" height="20" fill="#38BDF8" filter="url(#glow)"/>
  </svg>
);

// --- Quote Modal Component ---
const QuoteModal = ({ isOpen, onClose }) => {
  const [formState, setFormState] = useState('idle');
  const [formData, setFormData] = useState({ name: '', phone: '', email: '', requirements: '' });
  if (!isOpen) return null;
  const handleSubmit = async (e) => {
    e.preventDefault();
    setFormState('sending');
    try {
      const response = await fetch('https://formspree.io/f/xgolrnjp', {
        method: 'POST',
        headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
        body: JSON.stringify({ "Name": formData.name, "Phone": formData.phone, "Email": formData.email, "Requirements": formData.requirements, "_subject": `New Quote Request from ${formData.name}` })
      });
      if (response.ok) { setFormState('success'); setFormData({ name: '', phone: '', email: '', requirements: '' }); } 
      else { setFormState('error'); }
    } catch (error) { setFormState('error'); }
  };
  return (
    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 text-left">
      <div className="absolute inset-0 bg-[#0A192F]/80 backdrop-blur-md" onClick={onClose}></div>
      <div className="relative w-full max-w-xl bg-[#111827] border border-white/10 rounded-[32px] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300 p-8 md:p-10">
        <button onClick={onClose} className="absolute top-6 right-6 p-2 hover:bg-white/5 rounded-full transition-colors text-slate-400"><X size={24} /></button>
        {formState !== 'success' ? (
          <>
            <div className="mb-8"><div className="flex items-center space-x-3 mb-2"><BrandLogo className="w-8 h-8" /><h3 className="text-2xl md:text-3xl font-bold text-white tracking-tight leading-none">ขอใบเสนอราคา</h3></div><p className="text-slate-400 text-sm">ข้อมูลจะถูกส่งไปยังทีมงานบริหารโครงการโดยตรง</p></div>
            <form onSubmit={handleSubmit} className="space-y-4">
              <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">ชื่อ-นามสกุล</label><input required type="text" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="คุณสมชาย ใจดี" value={formData.name} onChange={(e)=>setFormData({...formData, name: e.target.value})}/></div>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">เบอร์โทรศัพท์</label><input required type="tel" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="08X-XXX-XXXX" value={formData.phone} onChange={(e)=>setFormData({...formData, phone: e.target.value})}/></div>
                <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">อีเมล</label><input required type="email" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="example@mail.com" value={formData.email} onChange={(e)=>setFormData({...formData, email: e.target.value})}/></div>
              </div>
              <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">รายละเอียดโครงการ</label><textarea className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all h-28 resize-none" placeholder="ระบุความต้องการของคุณที่นี่..." value={formData.requirements} onChange={(e)=>setFormData({...formData, requirements: e.target.value})}></textarea></div>
              <button disabled={formState === 'sending'} className="w-full bg-slate-200 text-[#0A192F] py-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-white transition-all disabled:opacity-50">{formState === 'sending' ? <Loader2 className="animate-spin" size={20}/> : <Send size={20}/>} <span>ยืนยันการส่งข้อมูล</span></button>
            </form>
          </>
        ) : (
          <div className="text-center py-8 animate-in fade-in slide-in-from-bottom-4 duration-500"><div className="w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-6"><CheckCircle2 size={40} className="text-emerald-400" /></div><h3 className="text-2xl font-bold text-white mb-2">ส่งข้อมูลเรียบร้อย!</h3><p className="text-slate-400 mb-8 max-w-xs mx-auto leading-relaxed">ข้อมูลถูกส่งไปยังทีมงานเรียบร้อยแล้ว เราจะรีบดำเนินการจัดทำใบเสนอราคาและติดต่อกลับหาคุณโดยเร็วที่สุด</p><button onClick={onClose} className="px-10 py-3 bg-white/5 border border-white/10 rounded-xl font-bold text-white hover:bg-white/10">ปิดหน้าต่าง</button></div>
        )}
      </div>
    </div>
  );
};

// --- Reusable Scroll Reveal Wrapper ---
const Reveal = ({ children, width = "w-full", delay = 0 }) => {
  const ref = useRef(null);
  const [isVisible, setIsVisible] = useState(false);
  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => { if (entry.isIntersecting) { setIsVisible(true); observer.unobserve(entry.target); } }, { threshold: 0.1 });
    if (ref.current) observer.observe(ref.current);
    return () => observer.disconnect();
  }, []);
  return <div ref={ref} className={`transition-all duration-1000 ease-out ${width} ${isVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-12"}`} style={{ transitionDelay: `${delay}ms` }}>{children}</div>;
};

// --- Main App Component ---
const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isSidebarOpen, setIsSidebarOpen] = useState(false);
  const [isQuoteOpen, setIsQuoteOpen] = useState(false);
  const [isChatOpen, setIsChatOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  const [activePkgSlide, setActivePkgSlide] = useState(0);

  // Chat States
  const [messages, setMessages] = useState([
    { role: 'model', text: 'สวัสดีค่ะ Park Innovation Plus ยินดีให้บริการค่ะ มีข้อมูลส่วนไหนให้ช่วยแนะนำเกี่ยวกับระบบจอดรถอัจฉริยะไหมคะ?' }
  ]);
  const [inputText, setInputText] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const chatEndRef = useRef(null);

  useEffect(() => { chatEndRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isTyping]);
  useEffect(() => { const handleScroll = () => setScrolled(window.scrollY > 50); window.addEventListener('scroll', handleScroll); return () => window.removeEventListener('scroll', handleScroll); }, []);

  const packages = [
    { id: 1, name: 'Begin รายเดือน', price: '2,500', tag: 'Starter', icon: <Monitor className="text-blue-400" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer'] },
    { id: 2, name: 'Standard รายเดือน', price: '3,500', tag: 'Popular', icon: <Layers className="text-slate-300" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer', 'Control Barrier Gate x2', 'Control Camera x2'] },
    { id: 3, name: 'Standard Advance รายเดือน', price: '5,500', tag: 'Best Value', icon: <Zap className="text-yellow-400" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer', 'Camera x2', 'Barrier Gate x2', 'Control Barrier Gate', 'Control Camera'] },
    { id: 4, name: 'Custom Enterprise', price: 'Custom', tag: 'Premium', icon: <Shield className="text-white" />, items: ['Barcode/Reader', 'Printer', 'Camera', 'Barrier Gate', 'Control Barrier Gate', 'Control Camera', 'Kiosk Auto In Out'] }
  ];

  const nextPkg = () => setActivePkgSlide((prev) => (prev + 1) % packages.length);
  const prevPkg = () => setActivePkgSlide((prev) => (prev - 1 + packages.length) % packages.length);

  const callGeminiAPI = async (userQuery) => {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
    const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] } };
    let delay = 1000;
    for (let i = 0; i < 5; i++) {
      try {
        const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
        if (!response.ok) throw new Error('API Error');
        const result = await response.json();
        return result.candidates?.[0]?.content?.parts?.[0]?.text || "ขออภัยค่ะ ฉันไม่สามารถประมวลผลข้อมูลได้ในขณะนี้";
      } catch (error) {
        if (i === 4) return "ขออภัยค่ะ ระบบขัดข้องชั่วคราว กรุณาลองใหม่อีกครั้งค่ะ";
        await new Promise(r => setTimeout(r, delay)); delay *= 2;
      }
    }
  };

  const handleSendMessage = async (e) => {
    e.preventDefault();
    if (!inputText.trim()) return;
    const userMessage = { role: 'user', text: inputText };
    setMessages(prev => [...prev, userMessage]);
    setInputText('');
    setIsTyping(true);
    const aiResponseText = await callGeminiAPI(inputText);
    setMessages(prev => [...prev, { role: 'model', text: aiResponseText }]);
    setIsTyping(false);
  };

  return (
    <div className="min-h-screen bg-[#0A192F] text-slate-200 font-sans selection:bg-slate-400 selection:text-white overflow-x-hidden">
      <QuoteModal isOpen={isQuoteOpen} onClose={() => setIsQuoteOpen(false)} />

      {/* Side Package Compare */}
      <aside className={`fixed top-0 left-0 h-full w-[350px] md:w-[450px] bg-[#0A192F] border-r border-white/10 z-[70] transition-transform duration-500 transform ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col shadow-2xl`}>
        <div className="p-6 border-b border-white/10 flex justify-between items-center bg-[#111827]">
          <div className="flex items-center space-x-3"><BrandLogo className="w-8 h-8" /><h2 className="text-xl font-bold text-white tracking-tight uppercase text-left">Packages</h2></div>
          <button onClick={() => setIsSidebarOpen(false)} className="p-2 hover:bg-white/5 rounded-full text-slate-400"><X size={24} /></button>
        </div>
        <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar text-left">
          {packages.map((pkg) => (
            <div key={pkg.id} className="group p-5 rounded-2xl border border-white/5 bg-white/[0.02] hover:bg-white/[0.05] transition-all text-left">
              <div className="flex justify-between items-start mb-4">
                <div><span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">{pkg.tag}</span><h3 className="text-lg font-bold text-white leading-tight">{pkg.name}</h3></div>
                <div className="text-right"><div className="text-[10px] text-slate-500 uppercase tracking-tighter leading-none mb-1">Starting At</div><div className="text-xl font-bold text-slate-200">฿{pkg.price}{pkg.price !== 'Custom' && <span className="text-xs font-normal">/ด.</span>}</div></div>
              </div>
              <ul className="space-y-1.5">{pkg.items.map((item, i) => (<li key={i} className="flex items-center text-[11px] text-slate-400 font-light leading-tight"><CheckCircle2 size={12} className="mr-2 text-slate-600 flex-shrink-0" /> {item}</li>))}</ul>
            </div>
          ))}
        </div>
      </aside>

      <button onClick={() => setIsSidebarOpen(true)} className={`fixed left-0 top-1/2 -translate-y-1/2 z-[55] bg-slate-200 text-[#0A192F] p-3 rounded-r-2xl shadow-2xl transition-all duration-500 hover:pl-6 group ${isSidebarOpen ? '-translate-x-full' : 'translate-x-0'}`}>
        <div className="flex flex-col items-center space-y-2"><Package size={20} /><span className="[writing-mode:vertical-lr] font-bold text-[10px] uppercase tracking-[0.2em] py-2">Compare</span></div>
      </button>

      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled ? 'bg-[#0A192F]/95 backdrop-blur-md py-4 shadow-xl border-b border-white/5' : 'bg-transparent py-6'}`}>
        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center space-x-2"><BrandLogo className="w-12 h-12" /><div className="flex flex-col text-left"><span className="text-xl font-bold text-white leading-none tracking-tight">PARK INNOVATION</span><span className="text-[10px] text-slate-400 font-medium tracking-[0.2em] uppercase leading-none">Plus +</span></div></div>
          <div className="hidden md:flex items-center space-x-8">
            {['หน้าแรก', 'แพ็กเกจ', 'อุปกรณ์อัจฉริยะ', 'ระบบซอฟต์แวร์', 'ติดต่อเรา'].map((item) => (<a key={item} href={`#${item}`} className="text-sm font-medium hover:text-white transition-colors text-slate-300 relative group">{item}<span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-slate-400 transition-all group-hover:w-full"></span></a>))}
            <button onClick={() => setIsQuoteOpen(true)} className="bg-slate-200 text-[#0A192F] px-6 py-2 rounded-full text-sm font-bold hover:bg-white transition-all transform hover:scale-105 active:scale-95 shadow-lg">ขอใบเสนอราคา</button>
          </div>
          <button className="md:hidden text-white" onClick={() => setIsMenuOpen(!isMenuOpen)}>{isMenuOpen ? <X size={28} /> : <Menu size={28} />}</button>
        </div>
      </nav>

      {/* Hero Section */}
      <section id="หน้าแรก" className="relative min-h-screen flex items-center pt-20 overflow-hidden">
        <div className="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-900/20 to-transparent pointer-events-none"></div>
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-center relative z-10 text-left">
          <div className="space-y-8">
            <Reveal delay={100}><div className="inline-flex items-center space-x-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-slate-400 text-xs tracking-wider uppercase"><span className="w-2 h-2 rounded-full bg-blue-400 animate-pulse"></span><span>Smart Parking Management</span></div></Reveal>
            <Reveal delay={300}><h1 className="text-5xl md:text-7xl font-bold text-white leading-[1.1] tracking-tight">ยกระดับระบบจอดรถ <br /><span className="text-transparent bg-clip-text bg-gradient-to-r from-slate-200 to-slate-500">เพื่อโครงการระดับพรีเมียม</span></h1></Reveal>
            <Reveal delay={500}><p className="text-lg text-slate-400 max-w-lg leading-relaxed font-light">เทคโนโลยี AI LPR และ Cloud Computing ครบวงจร สำหรับหมู่บ้านหรูและคอนโดมิเนียมชั้นนำ</p></Reveal>
            <Reveal delay={700}><button onClick={() => setIsQuoteOpen(true)} className="bg-gradient-to-r from-slate-200 to-slate-400 text-[#0A192F] px-8 py-4 rounded-xl font-bold hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] transition-all flex items-center space-x-2 group"><span>เริ่มยกระดับโครงการของคุณ</span><ChevronRight size={20} className="group-hover:translate-x-1 transition-transform" /></button></Reveal>
          </div>
          <Reveal delay={400}>
            <div className="relative aspect-square bg-gradient-to-br from-slate-800/50 to-[#0A192F] rounded-3xl border border-white/10 p-8 relative overflow-hidden group shadow-2xl flex flex-col justify-center items-center space-y-8">
              <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
              <div className="flex items-center space-x-4 bg-white/5 p-4 rounded-2xl border border-white/10 backdrop-blur-sm self-end mr-4 animate-bounce-slow"><Camera className="text-blue-400" /><div><div className="text-[10px] text-slate-400 uppercase tracking-widest leading-none mb-1">LPR Active</div><div className="text-sm font-mono text-white">กข 1234</div></div></div>
              <div className="w-64 h-2 bg-gradient-to-r from-slate-500 to-transparent rounded-full animate-pulse"></div>
              <div className="flex items-center space-x-4 bg-white/5 p-4 rounded-2xl border border-white/10 backdrop-blur-sm self-start ml-4 shadow-xl"><BrandLogo className="w-6 h-6" /><div className="text-xs font-mono text-white uppercase tracking-wider">Parking Management Systems</div></div>
            </div>
          </Reveal>
        </div>
      </section>

      {/* Package Carousel */}
      <section id="แพ็กเกจ" className="py-24 bg-[#0D1B2A] border-y border-white/5">
        <div className="max-w-7xl mx-auto px-6">
          <Reveal><div className="text-center mb-16 space-y-4"><h2 className="text-3xl md:text-5xl font-bold text-white uppercase tracking-tight text-center">Enterprise Packages</h2><div className="w-24 h-1 bg-slate-400 mx-auto"></div><p className="text-slate-400 font-light text-center">โซลูชันที่ปรับแต่งได้ตามขนาดและความต้องการของโครงการ</p></div></Reveal>
          <div className="relative group px-4 md:px-12">
            <div className="overflow-hidden">
              <div className="flex transition-transform duration-700 ease-in-out" style={{ transform: `translateX(-${activePkgSlide * 100}%)` }}>
                {packages.map((pkg, idx) => (
                  <div key={pkg.id} className="w-full flex-shrink-0 px-2 md:px-4">
                    <div className="bg-[#111827] border border-white/10 rounded-[40px] p-8 md:p-12 flex flex-col md:flex-row items-center gap-12 shadow-2xl relative overflow-hidden group/card">
                      <div className="flex-1 space-y-6 relative z-10 text-left text-left">
                        <div className="flex items-center space-x-4"><div className="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center text-3xl">{pkg.icon}</div><div><span className="text-xs font-bold text-blue-400 uppercase tracking-[0.2em]">{pkg.tag}</span><h3 className="text-2xl md:text-4xl font-bold text-white tracking-tight">{pkg.name}</h3></div></div>
                        <div className="py-6 border-y border-white/5"><div className="text-sm text-slate-500 mb-1 leading-none">ราคาเริ่มต้น</div><div className="text-4xl md:text-6xl font-bold text-white tracking-tighter leading-none">{pkg.price === 'Custom' ? 'Custom' : `฿${pkg.price}`}{pkg.price !== 'Custom' && <span className="text-lg font-normal text-slate-500 ml-2">/ เดือน</span>}</div></div>
                        <ul className="grid grid-cols-1 sm:grid-cols-2 gap-4">{pkg.items.map((item, i) => (<li key={i} className="flex items-center space-x-3 text-slate-300 leading-tight font-light text-sm"><CheckCircle2 size={18} className="text-slate-500 flex-shrink-0" /><span>{item}</span></li>))}</ul>
                        <button onClick={() => setIsQuoteOpen(true)} className="bg-slate-200 text-[#0A192F] px-8 py-3 rounded-xl font-bold hover:bg-white transition-all shadow-xl mt-4">ขอใบเสนอราคาแพ็กเกจนี้</button>
                      </div>
                      <div className="w-full md:w-1/3 aspect-square bg-gradient-to-br from-white/5 to-transparent rounded-3xl border border-white/5 flex items-center justify-center p-8 relative opacity-20"><BrandLogo className="w-48 h-48" /></div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            <button onClick={prevPkg} className="absolute left-0 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-[#111827] border border-white/10 flex items-center justify-center text-white hover:bg-white hover:text-[#0A192F] transition-all z-20 shadow-2xl -ml-2 md:-ml-7"><ChevronLeft size={24} /></button>
            <button onClick={nextPkg} className="absolute right-0 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-[#111827] border border-white/10 flex items-center justify-center text-white hover:bg-white hover:text-[#0A192F] transition-all z-20 shadow-2xl -mr-2 md:-mr-7"><ChevronRight size={24} /></button>
          </div>
        </div>
      </section>

      {/* Hardware Section */}
      <section id="อุปกรณ์อัจฉริยะ" className="py-24 bg-[#111827]">
        <div className="max-w-7xl mx-auto px-6 text-center">
          <Reveal><h2 className="text-3xl md:text-4xl font-bold text-white uppercase tracking-wider mb-4 leading-none text-center">Smart Hardware</h2><div className="w-20 h-1 bg-slate-400 mx-auto mb-12"></div></Reveal>
          <div className="grid md:grid-cols-3 gap-8 text-left">
            {[ { icon: <Shield size={32} />, title: "Smart Barriers", desc: "ไม้กั้นความเร็วสูง ทนทาน เปิด-ปิดเงียบสนิทด้วยมอเตอร์เทคโนโลยีเยอรมัน" }, { icon: <Camera size={32} />, title: "AI LPR Cameras", desc: "อ่านป้ายทะเบียนไทยแม่นยำสูง 99.9% แม้ในสภาวะแสงน้อยหรือฝนตกหนัก" }, { icon: <CreditCard size={32} />, title: "Payment Kiosks", desc: "ตู้ชำระเงินอัตโนมัติครบวงจร รองรับ QR, Credit Card และระบบสมาชิก" } ].map((item, idx) => (
              <Reveal key={idx} delay={idx * 200}><div className="p-8 rounded-3xl bg-[#0A192F] border border-white/5 hover:border-slate-500 transition-all hover:-translate-y-2"><div className="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-6 mx-auto text-slate-300">{item.icon}</div><h3 className="text-xl font-bold text-white mb-4 leading-none">{item.title}</h3><p className="text-slate-400 text-sm leading-relaxed font-light">{item.desc}</p></div></Reveal>
            ))}
          </div>
        </div>
      </section>

      {/* Software Section */}
      <section id="ระบบซอฟต์แวร์" className="py-24 relative">
        <div className="max-w-7xl mx-auto px-6">
          <Reveal><div className="text-center mb-16 space-y-4 text-center"><h2 className="text-3xl md:text-4xl font-bold text-white uppercase tracking-wider leading-none">Software Ecosystem</h2><div className="w-20 h-1 bg-slate-400 mx-auto"></div></div></Reveal>
          <div className="grid md:grid-cols-2 gap-16 items-center mb-24 text-left text-left">
            <Reveal delay={200}><div className="space-y-8 text-left"><div className="inline-flex items-center space-x-2 px-4 py-2 rounded-lg bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold uppercase tracking-widest leading-none">Cloud Platform</div><h3 className="text-3xl md:text-5xl font-bold text-white leading-tight tracking-tight">Enterprise Cloud <br /> Management</h3><div className="grid grid-cols-1 sm:grid-cols-2 gap-4">{[ { title: "Real-time Dashboard", desc: "ติดตามสถานะจอดรถแบบสด", icon: <BarChart3 size={20} className="text-slate-400" /> }, { title: "Member System", desc: "จัดการฐานข้อมูลและสิทธิ์สมาชิก", icon: <Users size={20} className="text-slate-400" /> }, { title: "Financial Reports", icon: <CreditCard size={20} className="text-slate-400" />, desc: "สรุปรายได้อัตโนมัติ" }, { title: "Legal Ready", icon: <Lock size={20} className="text-slate-400" />, desc: "PDPA Compliance มาตรฐานสูง" } ].map((item, i) => (<div key={i} className="p-4 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all text-left"><div className="mb-2">{item.icon}</div><div className="text-white font-bold text-sm mb-1 leading-none">{item.title}</div><div className="text-slate-500 text-xs leading-tight font-light">{item.desc}</div></div>))}</div></div></Reveal>
            <Reveal delay={400}><div className="relative rounded-3xl border border-white/10 overflow-hidden shadow-2xl bg-[#1f2937]/50 p-8"><div className="flex justify-between items-center mb-8 border-b border-white/5 pb-4 text-left"><div className="text-xs font-bold text-slate-500 tracking-widest uppercase leading-none">Admin Console v3.1</div><div className="flex space-x-1"><div className="w-2 h-2 rounded-full bg-red-500"></div><div className="w-2 h-2 rounded-full bg-yellow-500"></div><div className="w-2 h-2 rounded-full bg-green-500"></div></div></div><div className="space-y-4 text-left"><div className="h-4 bg-white/5 rounded w-1/2"></div><div className="grid grid-cols-3 gap-2">{[1,2,3].map(i => <div key={i} className="h-16 bg-white/5 rounded-xl"></div>)}</div><div className="h-32 bg-gradient-to-t from-blue-500/10 to-transparent rounded-xl flex items-center justify-center"><BarChart3 size={40} className="text-blue-400/30" /></div></div></div></Reveal>
          </div>
          <div className="grid md:grid-cols-12 gap-12 items-center bg-[#111827]/50 p-8 md:p-12 rounded-[40px] border border-white/5 text-left text-left">
            <div className="md:col-span-5 space-y-8 text-left">
              <Reveal delay={100}><h4 className="text-3xl font-bold text-white tracking-wide">Application Client Solutions</h4><p className="text-slate-400 text-base leading-relaxed font-light text-left text-left">เชื่อมต่อการทำงานไม่สะดุดระหว่างลูกบ้านและนิติบุคคลผ่านแอปพลิเคชันระดับ Enterprise</p></Reveal>
              <div className="grid grid-cols-1 gap-5">{[ { title: "Visitor E-Stamp", icon: <QrCode />, desc: "ประทับตราออนไลน์รวดเร็ว" }, { title: "E-Payment", icon: <CreditCard />, desc: "จ่ายค่าจอดรถผ่าน QR" }, { title: "Pre-Regis", icon: <Globe />, desc: "ลงทะเบียนผู้มาติดต่อล่วงหน้า" }, { title: "Alerts", icon: <Bell />, desc: "แจ้งเตือนรถเข้า-ออกทันที" } ].map((item, i) => (<Reveal key={i} delay={300 + (i * 150)}><div className="flex items-start space-x-4 group p-2 rounded-xl transition-all hover:bg-white/5 text-left"><div className="bg-blue-500/10 p-3 rounded-xl group-hover:bg-blue-500/20 transition-all text-blue-400">{React.cloneElement(item.icon, { size: 22 })}</div><div className="text-left"><div className="text-white font-bold text-sm mb-1 leading-none">{item.title}</div><div className="text-slate-500 text-xs leading-relaxed font-light">{item.desc}</div></div></div></Reveal>))}</div>
            </div>
            <div className="md:col-span-7 aspect-video bg-slate-800 rounded-3xl border border-white/10 flex items-center justify-center opacity-40 group overflow-hidden"><Smartphone size={60} className="text-slate-600 transition-transform duration-700 group-hover:scale-110" /></div>
          </div>
        </div>
      </section>

      {/* Services Section */}
      <section id="ติดต่อเรา" className="py-24 bg-gradient-to-b from-[#111827] to-[#0A192F]">
        <div className="max-w-7xl mx-auto px-6 text-left">
          <div className="bg-slate-900 rounded-[40px] p-8 md:p-16 border border-white/5 flex flex-col md:flex-row justify-between items-center gap-12 text-left">
            <div className="max-w-xl space-y-6 text-left">
              <h2 className="text-3xl font-bold text-white tracking-tight leading-none text-left">Maintenance Services</h2>
              <p className="text-slate-400 leading-relaxed font-light text-left">ดูแลตลอด 24 ชม. ด้วยทีมช่างเทคนิคผู้เชี่ยวชาญ เข้าหน้างานทันทีภายใน 4 ชม. เมื่อเกิดปัญหา</p>
              <div className="flex space-x-12">
                <div className="text-left">
                  <div className="text-2xl font-bold text-white tracking-tighter leading-none">24/7</div>
                  <div className="text-xs text-slate-500 uppercase tracking-widest font-bold mt-1 leading-none">Support</div>
                </div>
                <div className="text-left">
                  <div className="text-2xl font-bold text-white tracking-tighter leading-none">4 Hrs</div>
                  <div className="text-xs text-slate-500 uppercase tracking-widest font-bold mt-1 leading-none">Response</div>
                </div>
              </div>
            </div>
            {/* Fixed Grouping: Changed icon and adjusted layout for Request Quote button */}
            <div className="flex flex-col sm:flex-row gap-4 w-full md:w-auto">
              <button 
                onClick={() => setIsQuoteOpen(true)} 
                className="bg-white text-[#0A192F] px-10 py-5 rounded-2xl font-bold hover:bg-slate-200 transition-all shadow-2xl flex items-center justify-center space-x-3 text-lg"
              >
                <Send size={22} className="text-[#0A192F]" />
                <span>ขอใบเสนอราคา</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-20 border-t border-white/5 bg-[#0A192F] text-left text-left">
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12 text-slate-400 text-sm text-left">
          <div className="col-span-2 space-y-6 text-left"><div className="flex items-center space-x-3"><BrandLogo className="w-10 h-10" /><span className="text-lg font-bold text-white uppercase tracking-wider leading-none">Park Innovation Plus</span></div><p className="max-w-xs font-light">นวัตกรรมระบบจอดรถอัจฉริยะที่ออกแบบมาเพื่อโครงการระดับพรีเมียมโดยเฉพาะ</p></div>
          
          <div className="space-y-4 text-left">
            <h4 className="text-white font-bold text-xs uppercase tracking-widest leading-none mb-1">ติดต่อเรา</h4>
            <div className="flex items-start space-x-3">
              <MapPin size={16} className="mt-1 flex-shrink-0 text-blue-400" />
              <span className="leading-relaxed">215/45 หมู่ที่ 3 ตําบลสําโรง อําเภอพระประแดง จังหวัดสมุทรปราการ 10130</span>
            </div>
            <div className="flex items-start space-x-3">
              <Phone size={16} className="mt-1 flex-shrink-0 text-blue-400" />
              <div className="flex flex-col space-y-1">
                <span>06-2661-4562</span>
                <span>08-0165-9459</span>
              </div>
            </div>
            <div className="flex items-center space-x-3"><Mail size={16} className="flex-shrink-0 text-blue-400" /><span>info@parkinnovationplus.com</span></div>
          </div>
          
          <div className="space-y-4 text-left text-left"><h4 className="text-white font-bold text-xs uppercase tracking-widest leading-none mb-1 text-left">ติดตามเรา</h4><div className="flex space-x-4">{['FB', 'LN', 'LI'].map(s => <div key={s} className="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all cursor-pointer text-[10px] font-bold">{s}</div>)}</div></div>
        </div>
        <div className="max-w-7xl mx-auto px-6 mt-16 pt-8 border-t border-white/5 text-center text-slate-600 text-[10px] uppercase font-bold tracking-widest">© 2024 Park Innovation Plus Co., Ltd. All Rights Reserved.</div>
      </footer>

      {/* AI Chat Assistant */}
      <div className="fixed bottom-8 right-8 z-[90] flex flex-col items-end space-y-4">
        <div className={`w-[350px] md:w-[400px] h-[500px] bg-[#111827] border border-white/10 rounded-[24px] shadow-3xl flex flex-col overflow-hidden transition-all duration-500 transform ${isChatOpen ? 'opacity-100 translate-y-0 scale-100' : 'opacity-0 translate-y-12 scale-90 pointer-events-none'}`}>
          <div className="p-5 bg-gradient-to-r from-slate-800 to-[#0A192F] border-b border-white/5 flex justify-between items-center text-left">
            <div className="flex items-center space-x-3 text-left text-left text-left"><div className="w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-blue-400/30"><BrandLogo className="w-6 h-6" /></div><div><div className="text-sm font-bold text-white leading-none text-left">AI Support</div><div className="text-[10px] text-blue-400 mt-1 flex items-center text-left"><span className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse mr-1.5"></span>Online</div></div></div>
            <button onClick={() => setIsChatOpen(false)} className="text-slate-400 hover:text-white p-1"><X size={20} /></button>
          </div>
          <div className="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar text-left bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] text-left text-left text-left">
            {messages.map((msg, i) => (
              <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[85%] p-3.5 rounded-2xl text-sm leading-relaxed ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-tr-none shadow-lg' : 'bg-white/5 text-slate-200 border border-white/5 rounded-tl-none text-left'}`}>{msg.text}</div>
              </div>
            ))}
            {isTyping && <div className="flex justify-start text-left text-left"><div className="bg-white/5 p-3.5 rounded-2xl border border-white/5 rounded-tl-none flex items-center space-x-1.5"><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"></div><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-100"></div><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-200"></div></div></div>}
            <div ref={chatEndRef} />
          </div>
          <form onSubmit={handleSendMessage} className="p-4 border-t border-white/5 bg-[#0A192F]/50 backdrop-blur-md text-left">
            <div className="relative flex items-center"><input type="text" placeholder="สอบถามข้อมูลที่นี่..." className="w-full bg-white/5 border border-white/10 rounded-full pl-5 pr-14 py-3 text-sm text-white focus:outline-none focus:border-blue-400 transition-all text-left" value={inputText} onChange={(e) => setInputText(e.target.value)} /><button type="submit" className="absolute right-2 w-10 h-10 bg-slate-200 text-[#0A192F] rounded-full flex items-center justify-center hover:bg-white active:scale-95 disabled:opacity-50" disabled={!inputText.trim() || isTyping}><Send size={18} /></button></div>
          </form>
        </div>
        <button onClick={() => setIsChatOpen(!isChatOpen)} className={`w-16 h-16 bg-gradient-to-br from-slate-200 to-slate-400 text-[#0A192F] rounded-full shadow-3xl flex items-center justify-center transform transition-all hover:scale-110 active:scale-95 group relative ${isChatOpen ? 'rotate-90' : ''}`}>
          {isChatOpen ? <X size={28} /> : <MessageCircle size={32} />}
          {!isChatOpen && <div className="absolute -top-12 right-0 bg-white text-[#0A192F] px-4 py-2 rounded-xl text-[11px] font-bold opacity-0 group-hover:opacity-100 transition-all shadow-lg translate-y-2 group-hover:translate-y-0">คุยกับเราตอนนี้!<div className="absolute -bottom-1 right-6 w-2 h-2 bg-white rotate-45"></div></div>}
        </button>
      </div>

      <style dangerouslySetInnerHTML={{ __html: `
        @keyframes bounce-slow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-bounce-slow { animation: bounce-slow 4s ease-in-out infinite; }
        html { scroll-behavior: smooth; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
      `}} />
    </div>
  );
};

export default App;


  Shield, 
  Cpu, 
  Cloud, 
  Settings, 
  ChevronRight, 
  Menu, 
  X, 
  MessageCircle, 
  Camera, 
  CreditCard, 
  Smartphone,
  CheckCircle2,
  MapPin, 
  Phone, 
  Mail, 
  BarChart3, 
  Users, 
  Database, 
  Lock, 
  Globe, 
  Bell, 
  QrCode, 
  Zap, 
  Tag, 
  Package, 
  Layers, 
  ChevronLeft, 
  Monitor, 
  Printer, 
  Scan, 
  Send, 
  Loader2, 
  AlertCircle,
  User,
  Bot,
  FileText
} from 'lucide-react';

// --- Global Config & AI API Setup ---
const apiKey = ""; 
const modelName = "gemini-2.5-flash-preview-09-2025";

const systemPrompt = `คุณคือผู้ช่วยอัจฉริยะ (AI Customer Support) ของบริษัท "Park Innovation Plus" ผู้นำด้านระบบบริหารจัดการที่จอดรถอัจฉริยะ
ข้อมูลบริษัทและผลิตภัณฑ์ที่คุณต้องแนะนำ:
1. แพ็กเกจ Begin (2,500/ด.): มีคอมพิวเตอร์, Barcode Reader, Printer
2. แพ็กเกจ Standard (3,500/ด.): เพิ่มระบบ Control Barrier Gate x2 และ Control Camera x2
3. แพ็กเกจ Standard Advance (5,500/ด.): ครบชุดด้วย Camera x2, Barrier Gate x2 พร้อมระบบควบคุม
4. แพ็กเกจ Custom Enterprise: ปรับแต่งได้ตามต้องการ มีตู้ Kiosk Auto In-Out

จุดเด่น: ใช้ AI LPR (อ่านป้ายทะเบียนแม่นยำ 99.9%), ระบบ Cloud Dashboard ดูข้อมูลได้ทั่วโลก, บริการหลังการขาย 24/7 (เข้าหน้างานภายใน 4 ชม.)
ข้อมูลติดต่อ: 
- เบอร์โทรศัพท์: 06-2661-4562, 08-0165-9459
- ที่อยู่: 215/45 หมู่ที่ 3 ตําบลสําโรง อําเภอพระประแดง จังหวัดสมุทรปราการ 10130
- อีเมล: parkinnovationplus@gmail.com

บุคลิก: สุภาพ, เป็นมืออาชีพ, มั่นใจในเทคโนโลยี, ใช้ภาษาไทยที่ดูหรูหราและเชื่อถือได้สำหรับลูกค้าระดับ Enterprise`;

// --- Custom Circuit Logo Component ---
const BrandLogo = ({ className = "w-10 h-10" }) => (
  <svg viewBox="0 0 100 100" className={className} fill="none" xmlns="http://www.w3.org/2000/svg">
    <filter id="glow"><feGaussianBlur stdDeviation="2" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
    <path d="M30 80V25H60C70 25 75 32 75 42C75 52 70 59 60 59H45" stroke="#38BDF8" strokeWidth="4" strokeLinecap="round" filter="url(#glow)"/>
    <path d="M45 59V80" stroke="#38BDF8" strokeWidth="4" strokeLinecap="round" filter="url(#glow)"/>
    <circle cx="30" cy="80" r="3" fill="#38BDF8" filter="url(#glow)"/><circle cx="45" cy="80" r="3" fill="#38BDF8" filter="url(#glow)"/>
    <path d="M35 35H55" stroke="#38BDF8" strokeWidth="2" strokeLinecap="round" opacity="0.6"/>
    <path d="M35 45H65" stroke="#38BDF8" strokeWidth="2" strokeLinecap="round" opacity="0.6"/>
    <circle cx="65" cy="45" r="2" fill="#38BDF8" opacity="0.6"/>
    <rect x="70" y="38" width="20" height="6" fill="#38BDF8" filter="url(#glow)"/><rect x="77" y="31" width="6" height="20" fill="#38BDF8" filter="url(#glow)"/>
  </svg>
);

// --- Quote Modal Component ---
const QuoteModal = ({ isOpen, onClose }) => {
  const [formState, setFormState] = useState('idle');
  const [formData, setFormData] = useState({ name: '', phone: '', email: '', requirements: '' });
  if (!isOpen) return null;
  const handleSubmit = async (e) => {
    e.preventDefault();
    setFormState('sending');
    try {
      const response = await fetch('https://formspree.io/f/xgolrnjp', {
        method: 'POST',
        headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
        body: JSON.stringify({ "Name": formData.name, "Phone": formData.phone, "Email": formData.email, "Requirements": formData.requirements, "_subject": `New Quote Request from ${formData.name}` })
      });
      if (response.ok) { setFormState('success'); setFormData({ name: '', phone: '', email: '', requirements: '' }); } 
      else { setFormState('error'); }
    } catch (error) { setFormState('error'); }
  };
  return (
    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-6 text-left">
      <div className="absolute inset-0 bg-[#0A192F]/80 backdrop-blur-md" onClick={onClose}></div>
      <div className="relative w-full max-w-xl bg-[#111827] border border-white/10 rounded-[32px] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300 p-8 md:p-10">
        <button onClick={onClose} className="absolute top-6 right-6 p-2 hover:bg-white/5 rounded-full transition-colors text-slate-400"><X size={24} /></button>
        {formState !== 'success' ? (
          <>
            <div className="mb-8"><div className="flex items-center space-x-3 mb-2"><BrandLogo className="w-8 h-8" /><h3 className="text-2xl md:text-3xl font-bold text-white tracking-tight leading-none">ขอใบเสนอราคา</h3></div><p className="text-slate-400 text-sm">ข้อมูลจะถูกส่งไปยังทีมงานบริหารโครงการโดยตรง</p></div>
            <form onSubmit={handleSubmit} className="space-y-4">
              <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">ชื่อ-นามสกุล</label><input required type="text" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="คุณสมชาย ใจดี" value={formData.name} onChange={(e)=>setFormData({...formData, name: e.target.value})}/></div>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">เบอร์โทรศัพท์</label><input required type="tel" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="08X-XXX-XXXX" value={formData.phone} onChange={(e)=>setFormData({...formData, phone: e.target.value})}/></div>
                <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">อีเมล</label><input required type="email" className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all" placeholder="example@mail.com" value={formData.email} onChange={(e)=>setFormData({...formData, email: e.target.value})}/></div>
              </div>
              <div><label className="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5">รายละเอียดโครงการ</label><textarea className="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white focus:outline-none focus:border-blue-400 transition-all h-28 resize-none" placeholder="ระบุความต้องการของคุณที่นี่..." value={formData.requirements} onChange={(e)=>setFormData({...formData, requirements: e.target.value})}></textarea></div>
              <button disabled={formState === 'sending'} className="w-full bg-slate-200 text-[#0A192F] py-4 rounded-xl font-bold flex items-center justify-center space-x-2 hover:bg-white transition-all disabled:opacity-50">{formState === 'sending' ? <Loader2 className="animate-spin" size={20}/> : <Send size={20}/>} <span>ยืนยันการส่งข้อมูล</span></button>
            </form>
          </>
        ) : (
          <div className="text-center py-8 animate-in fade-in slide-in-from-bottom-4 duration-500"><div className="w-20 h-20 bg-emerald-500/10 rounded-full flex items-center justify-center mx-auto mb-6"><CheckCircle2 size={40} className="text-emerald-400" /></div><h3 className="text-2xl font-bold text-white mb-2">ส่งข้อมูลเรียบร้อย!</h3><p className="text-slate-400 mb-8 max-w-xs mx-auto leading-relaxed">ข้อมูลถูกส่งไปยังทีมงานเรียบร้อยแล้ว เราจะรีบดำเนินการจัดทำใบเสนอราคาและติดต่อกลับหาคุณโดยเร็วที่สุด</p><button onClick={onClose} className="px-10 py-3 bg-white/5 border border-white/10 rounded-xl font-bold text-white hover:bg-white/10">ปิดหน้าต่าง</button></div>
        )}
      </div>
    </div>
  );
};

// --- Reusable Scroll Reveal Wrapper ---
const Reveal = ({ children, width = "w-full", delay = 0 }) => {
  const ref = useRef(null);
  const [isVisible, setIsVisible] = useState(false);
  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => { if (entry.isIntersecting) { setIsVisible(true); observer.unobserve(entry.target); } }, { threshold: 0.1 });
    if (ref.current) observer.observe(ref.current);
    return () => observer.disconnect();
  }, []);
  return <div ref={ref} className={`transition-all duration-1000 ease-out ${width} ${isVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-12"}`} style={{ transitionDelay: `${delay}ms` }}>{children}</div>;
};

// --- Main App Component ---
const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isSidebarOpen, setIsSidebarOpen] = useState(false);
  const [isQuoteOpen, setIsQuoteOpen] = useState(false);
  const [isChatOpen, setIsChatOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);
  const [activePkgSlide, setActivePkgSlide] = useState(0);

  // Chat States
  const [messages, setMessages] = useState([
    { role: 'model', text: 'สวัสดีค่ะ Park Innovation Plus ยินดีให้บริการค่ะ มีข้อมูลส่วนไหนให้ช่วยแนะนำเกี่ยวกับระบบจอดรถอัจฉริยะไหมคะ?' }
  ]);
  const [inputText, setInputText] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const chatEndRef = useRef(null);

  useEffect(() => { chatEndRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages, isTyping]);
  useEffect(() => { const handleScroll = () => setScrolled(window.scrollY > 50); window.addEventListener('scroll', handleScroll); return () => window.removeEventListener('scroll', handleScroll); }, []);

  const packages = [
    { id: 1, name: 'Begin รายเดือน', price: '2,500', tag: 'Starter', icon: <Monitor className="text-blue-400" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer'] },
    { id: 2, name: 'Standard รายเดือน', price: '3,500', tag: 'Popular', icon: <Layers className="text-slate-300" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer', 'Control Barrier Gate x2', 'Control Camera x2'] },
    { id: 3, name: 'Standard Advance รายเดือน', price: '5,500', tag: 'Best Value', icon: <Zap className="text-yellow-400" />, items: ['คอมพิวเตอร์', 'Barcode/Reader', 'Printer', 'Camera x2', 'Barrier Gate x2', 'Control Barrier Gate', 'Control Camera'] },
    { id: 4, name: 'Custom Enterprise', price: 'Custom', tag: 'Premium', icon: <Shield className="text-white" />, items: ['Barcode/Reader', 'Printer', 'Camera', 'Barrier Gate', 'Control Barrier Gate', 'Control Camera', 'Kiosk Auto In Out'] }
  ];

  const nextPkg = () => setActivePkgSlide((prev) => (prev + 1) % packages.length);
  const prevPkg = () => setActivePkgSlide((prev) => (prev - 1 + packages.length) % packages.length);

  const callGeminiAPI = async (userQuery) => {
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
    const payload = { contents: [{ parts: [{ text: userQuery }] }], systemInstruction: { parts: [{ text: systemPrompt }] } };
    let delay = 1000;
    for (let i = 0; i < 5; i++) {
      try {
        const response = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
        if (!response.ok) throw new Error('API Error');
        const result = await response.json();
        return result.candidates?.[0]?.content?.parts?.[0]?.text || "ขออภัยค่ะ ฉันไม่สามารถประมวลผลข้อมูลได้ในขณะนี้";
      } catch (error) {
        if (i === 4) return "ขออภัยค่ะ ระบบขัดข้องชั่วคราว กรุณาลองใหม่อีกครั้งค่ะ";
        await new Promise(r => setTimeout(r, delay)); delay *= 2;
      }
    }
  };

  const handleSendMessage = async (e) => {
    e.preventDefault();
    if (!inputText.trim()) return;
    const userMessage = { role: 'user', text: inputText };
    setMessages(prev => [...prev, userMessage]);
    setInputText('');
    setIsTyping(true);
    const aiResponseText = await callGeminiAPI(inputText);
    setMessages(prev => [...prev, { role: 'model', text: aiResponseText }]);
    setIsTyping(false);
  };

  return (
    <div className="min-h-screen bg-[#0A192F] text-slate-200 font-sans selection:bg-slate-400 selection:text-white overflow-x-hidden">
      <QuoteModal isOpen={isQuoteOpen} onClose={() => setIsQuoteOpen(false)} />

      {/* Side Package Compare */}
      <aside className={`fixed top-0 left-0 h-full w-[350px] md:w-[450px] bg-[#0A192F] border-r border-white/10 z-[70] transition-transform duration-500 transform ${isSidebarOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col shadow-2xl`}>
        <div className="p-6 border-b border-white/10 flex justify-between items-center bg-[#111827]">
          <div className="flex items-center space-x-3"><BrandLogo className="w-8 h-8" /><h2 className="text-xl font-bold text-white tracking-tight uppercase text-left">Packages</h2></div>
          <button onClick={() => setIsSidebarOpen(false)} className="p-2 hover:bg-white/5 rounded-full text-slate-400"><X size={24} /></button>
        </div>
        <div className="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar text-left">
          {packages.map((pkg) => (
            <div key={pkg.id} className="group p-5 rounded-2xl border border-white/5 bg-white/[0.02] hover:bg-white/[0.05] transition-all text-left">
              <div className="flex justify-between items-start mb-4">
                <div><span className="text-[10px] font-bold text-slate-500 uppercase tracking-widest">{pkg.tag}</span><h3 className="text-lg font-bold text-white leading-tight">{pkg.name}</h3></div>
                <div className="text-right"><div className="text-[10px] text-slate-500 uppercase tracking-tighter leading-none mb-1">Starting At</div><div className="text-xl font-bold text-slate-200">฿{pkg.price}{pkg.price !== 'Custom' && <span className="text-xs font-normal">/ด.</span>}</div></div>
              </div>
              <ul className="space-y-1.5">{pkg.items.map((item, i) => (<li key={i} className="flex items-center text-[11px] text-slate-400 font-light leading-tight"><CheckCircle2 size={12} className="mr-2 text-slate-600 flex-shrink-0" /> {item}</li>))}</ul>
            </div>
          ))}
        </div>
      </aside>

      <button onClick={() => setIsSidebarOpen(true)} className={`fixed left-0 top-1/2 -translate-y-1/2 z-[55] bg-slate-200 text-[#0A192F] p-3 rounded-r-2xl shadow-2xl transition-all duration-500 hover:pl-6 group ${isSidebarOpen ? '-translate-x-full' : 'translate-x-0'}`}>
        <div className="flex flex-col items-center space-y-2"><Package size={20} /><span className="[writing-mode:vertical-lr] font-bold text-[10px] uppercase tracking-[0.2em] py-2">Compare</span></div>
      </button>

      {/* Navigation */}
      <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled ? 'bg-[#0A192F]/95 backdrop-blur-md py-4 shadow-xl border-b border-white/5' : 'bg-transparent py-6'}`}>
        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center space-x-2"><BrandLogo className="w-12 h-12" /><div className="flex flex-col text-left"><span className="text-xl font-bold text-white leading-none tracking-tight">PARK INNOVATION</span><span className="text-[10px] text-slate-400 font-medium tracking-[0.2em] uppercase leading-none">Plus +</span></div></div>
          <div className="hidden md:flex items-center space-x-8">
            {['หน้าแรก', 'แพ็กเกจ', 'อุปกรณ์อัจฉริยะ', 'ระบบซอฟต์แวร์', 'ติดต่อเรา'].map((item) => (<a key={item} href={`#${item}`} className="text-sm font-medium hover:text-white transition-colors text-slate-300 relative group">{item}<span className="absolute -bottom-1 left-0 w-0 h-0.5 bg-slate-400 transition-all group-hover:w-full"></span></a>))}
            <button onClick={() => setIsQuoteOpen(true)} className="bg-slate-200 text-[#0A192F] px-6 py-2 rounded-full text-sm font-bold hover:bg-white transition-all transform hover:scale-105 active:scale-95 shadow-lg">ขอใบเสนอราคา</button>
          </div>
          <button className="md:hidden text-white" onClick={() => setIsMenuOpen(!isMenuOpen)}>{isMenuOpen ? <X size={28} /> : <Menu size={28} />}</button>
        </div>
      </nav>

      {/* Hero Section */}
      <section id="หน้าแรก" className="relative min-h-screen flex items-center pt-20 overflow-hidden">
        <div className="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-900/20 to-transparent pointer-events-none"></div>
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-2 gap-12 items-center relative z-10 text-left">
          <div className="space-y-8">
            <Reveal delay={100}><div className="inline-flex items-center space-x-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-slate-400 text-xs tracking-wider uppercase"><span className="w-2 h-2 rounded-full bg-blue-400 animate-pulse"></span><span>Smart Parking Management</span></div></Reveal>
            <Reveal delay={300}><h1 className="text-5xl md:text-7xl font-bold text-white leading-[1.1] tracking-tight">ยกระดับระบบจอดรถ <br /><span className="text-transparent bg-clip-text bg-gradient-to-r from-slate-200 to-slate-500">เพื่อโครงการระดับพรีเมียม</span></h1></Reveal>
            <Reveal delay={500}><p className="text-lg text-slate-400 max-w-lg leading-relaxed font-light">เทคโนโลยี AI LPR และ Cloud Computing ครบวงจร สำหรับหมู่บ้านหรูและคอนโดมิเนียมชั้นนำ</p></Reveal>
            <Reveal delay={700}><button onClick={() => setIsQuoteOpen(true)} className="bg-gradient-to-r from-slate-200 to-slate-400 text-[#0A192F] px-8 py-4 rounded-xl font-bold hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] transition-all flex items-center space-x-2 group"><span>เริ่มยกระดับโครงการของคุณ</span><ChevronRight size={20} className="group-hover:translate-x-1 transition-transform" /></button></Reveal>
          </div>
          <Reveal delay={400}>
            <div className="relative aspect-square bg-gradient-to-br from-slate-800/50 to-[#0A192F] rounded-3xl border border-white/10 p-8 relative overflow-hidden group shadow-2xl flex flex-col justify-center items-center space-y-8">
              <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"></div>
              <div className="flex items-center space-x-4 bg-white/5 p-4 rounded-2xl border border-white/10 backdrop-blur-sm self-end mr-4 animate-bounce-slow"><Camera className="text-blue-400" /><div><div className="text-[10px] text-slate-400 uppercase tracking-widest leading-none mb-1">LPR Active</div><div className="text-sm font-mono text-white">กข 1234</div></div></div>
              <div className="w-64 h-2 bg-gradient-to-r from-slate-500 to-transparent rounded-full animate-pulse"></div>
              <div className="flex items-center space-x-4 bg-white/5 p-4 rounded-2xl border border-white/10 backdrop-blur-sm self-start ml-4 shadow-xl"><BrandLogo className="w-6 h-6" /><div className="text-xs font-mono text-white uppercase tracking-wider">Parking Management Systems</div></div>
            </div>
          </Reveal>
        </div>
      </section>

      {/* Package Carousel */}
      <section id="แพ็กเกจ" className="py-24 bg-[#0D1B2A] border-y border-white/5">
        <div className="max-w-7xl mx-auto px-6">
          <Reveal><div className="text-center mb-16 space-y-4"><h2 className="text-3xl md:text-5xl font-bold text-white uppercase tracking-tight text-center">Enterprise Packages</h2><div className="w-24 h-1 bg-slate-400 mx-auto"></div><p className="text-slate-400 font-light text-center">โซลูชันที่ปรับแต่งได้ตามขนาดและความต้องการของโครงการ</p></div></Reveal>
          <div className="relative group px-4 md:px-12">
            <div className="overflow-hidden">
              <div className="flex transition-transform duration-700 ease-in-out" style={{ transform: `translateX(-${activePkgSlide * 100}%)` }}>
                {packages.map((pkg, idx) => (
                  <div key={pkg.id} className="w-full flex-shrink-0 px-2 md:px-4">
                    <div className="bg-[#111827] border border-white/10 rounded-[40px] p-8 md:p-12 flex flex-col md:flex-row items-center gap-12 shadow-2xl relative overflow-hidden group/card">
                      <div className="flex-1 space-y-6 relative z-10 text-left text-left">
                        <div className="flex items-center space-x-4"><div className="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center text-3xl">{pkg.icon}</div><div><span className="text-xs font-bold text-blue-400 uppercase tracking-[0.2em]">{pkg.tag}</span><h3 className="text-2xl md:text-4xl font-bold text-white tracking-tight">{pkg.name}</h3></div></div>
                        <div className="py-6 border-y border-white/5"><div className="text-sm text-slate-500 mb-1 leading-none">ราคาเริ่มต้น</div><div className="text-4xl md:text-6xl font-bold text-white tracking-tighter leading-none">{pkg.price === 'Custom' ? 'Custom' : `฿${pkg.price}`}{pkg.price !== 'Custom' && <span className="text-lg font-normal text-slate-500 ml-2">/ เดือน</span>}</div></div>
                        <ul className="grid grid-cols-1 sm:grid-cols-2 gap-4">{pkg.items.map((item, i) => (<li key={i} className="flex items-center space-x-3 text-slate-300 leading-tight font-light text-sm"><CheckCircle2 size={18} className="text-slate-500 flex-shrink-0" /><span>{item}</span></li>))}</ul>
                        <button onClick={() => setIsQuoteOpen(true)} className="bg-slate-200 text-[#0A192F] px-8 py-3 rounded-xl font-bold hover:bg-white transition-all shadow-xl mt-4">ขอใบเสนอราคาแพ็กเกจนี้</button>
                      </div>
                      <div className="w-full md:w-1/3 aspect-square bg-gradient-to-br from-white/5 to-transparent rounded-3xl border border-white/5 flex items-center justify-center p-8 relative opacity-20"><BrandLogo className="w-48 h-48" /></div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
            <button onClick={prevPkg} className="absolute left-0 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-[#111827] border border-white/10 flex items-center justify-center text-white hover:bg-white hover:text-[#0A192F] transition-all z-20 shadow-2xl -ml-2 md:-ml-7"><ChevronLeft size={24} /></button>
            <button onClick={nextPkg} className="absolute right-0 top-1/2 -translate-y-1/2 w-14 h-14 rounded-full bg-[#111827] border border-white/10 flex items-center justify-center text-white hover:bg-white hover:text-[#0A192F] transition-all z-20 shadow-2xl -mr-2 md:-mr-7"><ChevronRight size={24} /></button>
          </div>
        </div>
      </section>

      {/* Hardware Section */}
      <section id="อุปกรณ์อัจฉริยะ" className="py-24 bg-[#111827]">
        <div className="max-w-7xl mx-auto px-6 text-center">
          <Reveal><h2 className="text-3xl md:text-4xl font-bold text-white uppercase tracking-wider mb-4 leading-none text-center">Smart Hardware</h2><div className="w-20 h-1 bg-slate-400 mx-auto mb-12"></div></Reveal>
          <div className="grid md:grid-cols-3 gap-8 text-left">
            {[ { icon: <Shield size={32} />, title: "Smart Barriers", desc: "ไม้กั้นความเร็วสูง ทนทาน เปิด-ปิดเงียบสนิทด้วยมอเตอร์เทคโนโลยีเยอรมัน" }, { icon: <Camera size={32} />, title: "AI LPR Cameras", desc: "อ่านป้ายทะเบียนไทยแม่นยำสูง 99.9% แม้ในสภาวะแสงน้อยหรือฝนตกหนัก" }, { icon: <CreditCard size={32} />, title: "Payment Kiosks", desc: "ตู้ชำระเงินอัตโนมัติครบวงจร รองรับ QR, Credit Card และระบบสมาชิก" } ].map((item, idx) => (
              <Reveal key={idx} delay={idx * 200}><div className="p-8 rounded-3xl bg-[#0A192F] border border-white/5 hover:border-slate-500 transition-all hover:-translate-y-2"><div className="w-16 h-16 rounded-2xl bg-white/5 flex items-center justify-center mb-6 mx-auto text-slate-300">{item.icon}</div><h3 className="text-xl font-bold text-white mb-4 leading-none">{item.title}</h3><p className="text-slate-400 text-sm leading-relaxed font-light">{item.desc}</p></div></Reveal>
            ))}
          </div>
        </div>
      </section>

      {/* Software Section */}
      <section id="ระบบซอฟต์แวร์" className="py-24 relative">
        <div className="max-w-7xl mx-auto px-6">
          <Reveal><div className="text-center mb-16 space-y-4 text-center"><h2 className="text-3xl md:text-4xl font-bold text-white uppercase tracking-wider leading-none">Software Ecosystem</h2><div className="w-20 h-1 bg-slate-400 mx-auto"></div></div></Reveal>
          <div className="grid md:grid-cols-2 gap-16 items-center mb-24 text-left text-left">
            <Reveal delay={200}><div className="space-y-8 text-left"><div className="inline-flex items-center space-x-2 px-4 py-2 rounded-lg bg-blue-500/10 border border-blue-500/20 text-blue-400 text-xs font-bold uppercase tracking-widest leading-none">Cloud Platform</div><h3 className="text-3xl md:text-5xl font-bold text-white leading-tight tracking-tight">Enterprise Cloud <br /> Management</h3><div className="grid grid-cols-1 sm:grid-cols-2 gap-4">{[ { title: "Real-time Dashboard", desc: "ติดตามสถานะจอดรถแบบสด", icon: <BarChart3 size={20} className="text-slate-400" /> }, { title: "Member System", desc: "จัดการฐานข้อมูลและสิทธิ์สมาชิก", icon: <Users size={20} className="text-slate-400" /> }, { title: "Financial Reports", icon: <CreditCard size={20} className="text-slate-400" />, desc: "สรุปรายได้อัตโนมัติ" }, { title: "Legal Ready", icon: <Lock size={20} className="text-slate-400" />, desc: "PDPA Compliance มาตรฐานสูง" } ].map((item, i) => (<div key={i} className="p-4 rounded-2xl bg-white/5 border border-white/10 hover:bg-white/10 transition-all text-left"><div className="mb-2">{item.icon}</div><div className="text-white font-bold text-sm mb-1 leading-none">{item.title}</div><div className="text-slate-500 text-xs leading-tight font-light">{item.desc}</div></div>))}</div></div></Reveal>
            <Reveal delay={400}><div className="relative rounded-3xl border border-white/10 overflow-hidden shadow-2xl bg-[#1f2937]/50 p-8"><div className="flex justify-between items-center mb-8 border-b border-white/5 pb-4 text-left"><div className="text-xs font-bold text-slate-500 tracking-widest uppercase leading-none">Admin Console v3.1</div><div className="flex space-x-1"><div className="w-2 h-2 rounded-full bg-red-500"></div><div className="w-2 h-2 rounded-full bg-yellow-500"></div><div className="w-2 h-2 rounded-full bg-green-500"></div></div></div><div className="space-y-4 text-left"><div className="h-4 bg-white/5 rounded w-1/2"></div><div className="grid grid-cols-3 gap-2">{[1,2,3].map(i => <div key={i} className="h-16 bg-white/5 rounded-xl"></div>)}</div><div className="h-32 bg-gradient-to-t from-blue-500/10 to-transparent rounded-xl flex items-center justify-center"><BarChart3 size={40} className="text-blue-400/30" /></div></div></div></Reveal>
          </div>
          <div className="grid md:grid-cols-12 gap-12 items-center bg-[#111827]/50 p-8 md:p-12 rounded-[40px] border border-white/5 text-left text-left">
            <div className="md:col-span-5 space-y-8 text-left">
              <Reveal delay={100}><h4 className="text-3xl font-bold text-white tracking-wide">Application Client Solutions</h4><p className="text-slate-400 text-base leading-relaxed font-light text-left text-left">เชื่อมต่อการทำงานไม่สะดุดระหว่างลูกบ้านและนิติบุคคลผ่านแอปพลิเคชันระดับ Enterprise</p></Reveal>
              <div className="grid grid-cols-1 gap-5">{[ { title: "Visitor E-Stamp", icon: <QrCode />, desc: "ประทับตราออนไลน์รวดเร็ว" }, { title: "E-Payment", icon: <CreditCard />, desc: "จ่ายค่าจอดรถผ่าน QR" }, { title: "Pre-Regis", icon: <Globe />, desc: "ลงทะเบียนผู้มาติดต่อล่วงหน้า" }, { title: "Alerts", icon: <Bell />, desc: "แจ้งเตือนรถเข้า-ออกทันที" } ].map((item, i) => (<Reveal key={i} delay={300 + (i * 150)}><div className="flex items-start space-x-4 group p-2 rounded-xl transition-all hover:bg-white/5 text-left"><div className="bg-blue-500/10 p-3 rounded-xl group-hover:bg-blue-500/20 transition-all text-blue-400">{React.cloneElement(item.icon, { size: 22 })}</div><div className="text-left"><div className="text-white font-bold text-sm mb-1 leading-none">{item.title}</div><div className="text-slate-500 text-xs leading-relaxed font-light">{item.desc}</div></div></div></Reveal>))}</div>
            </div>
            <div className="md:col-span-7 aspect-video bg-slate-800 rounded-3xl border border-white/10 flex items-center justify-center opacity-40 group overflow-hidden"><Smartphone size={60} className="text-slate-600 transition-transform duration-700 group-hover:scale-110" /></div>
          </div>
        </div>
      </section>

      {/* Services Section */}
      <section id="ติดต่อเรา" className="py-24 bg-gradient-to-b from-[#111827] to-[#0A192F]">
        <div className="max-w-7xl mx-auto px-6 text-left">
          <div className="bg-slate-900 rounded-[40px] p-8 md:p-16 border border-white/5 flex flex-col md:flex-row justify-between items-center gap-12 text-left">
            <div className="max-w-xl space-y-6 text-left">
              <h2 className="text-3xl font-bold text-white tracking-tight leading-none text-left">Maintenance Services</h2>
              <p className="text-slate-400 leading-relaxed font-light text-left">ดูแลตลอด 24 ชม. ด้วยทีมช่างเทคนิคผู้เชี่ยวชาญ เข้าหน้างานทันทีภายใน 4 ชม. เมื่อเกิดปัญหา</p>
              <div className="flex space-x-12">
                <div className="text-left">
                  <div className="text-2xl font-bold text-white tracking-tighter leading-none">24/7</div>
                  <div className="text-xs text-slate-500 uppercase tracking-widest font-bold mt-1 leading-none">Support</div>
                </div>
                <div className="text-left">
                  <div className="text-2xl font-bold text-white tracking-tighter leading-none">4 Hrs</div>
                  <div className="text-xs text-slate-500 uppercase tracking-widest font-bold mt-1 leading-none">Response</div>
                </div>
              </div>
            </div>
            {/* Fixed Grouping: Changed icon and adjusted layout for Request Quote button */}
            <div className="flex flex-col sm:flex-row gap-4 w-full md:w-auto">
              <button 
                onClick={() => setIsQuoteOpen(true)} 
                className="bg-white text-[#0A192F] px-10 py-5 rounded-2xl font-bold hover:bg-slate-200 transition-all shadow-2xl flex items-center justify-center space-x-3 text-lg"
              >
                <Send size={22} className="text-[#0A192F]" />
                <span>ขอใบเสนอราคา</span>
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-20 border-t border-white/5 bg-[#0A192F] text-left text-left">
        <div className="max-w-7xl mx-auto px-6 grid md:grid-cols-4 gap-12 text-slate-400 text-sm text-left">
          <div className="col-span-2 space-y-6 text-left"><div className="flex items-center space-x-3"><BrandLogo className="w-10 h-10" /><span className="text-lg font-bold text-white uppercase tracking-wider leading-none">Park Innovation Plus</span></div><p className="max-w-xs font-light">นวัตกรรมระบบจอดรถอัจฉริยะที่ออกแบบมาเพื่อโครงการระดับพรีเมียมโดยเฉพาะ</p></div>
          
          <div className="space-y-4 text-left">
            <h4 className="text-white font-bold text-xs uppercase tracking-widest leading-none mb-1">ติดต่อเรา</h4>
            <div className="flex items-start space-x-3">
              <MapPin size={16} className="mt-1 flex-shrink-0 text-blue-400" />
              <span className="leading-relaxed">215/45 หมู่ที่ 3 ตําบลสําโรง อําเภอพระประแดง จังหวัดสมุทรปราการ 10130</span>
            </div>
            <div className="flex items-start space-x-3">
              <Phone size={16} className="mt-1 flex-shrink-0 text-blue-400" />
              <div className="flex flex-col space-y-1">
                <span>06-2661-4562</span>
                <span>08-0165-9459</span>
              </div>
            </div>
            <div className="flex items-center space-x-3"><Mail size={16} className="flex-shrink-0 text-blue-400" /><span>info@parkinnovationplus.com</span></div>
          </div>
          
          <div className="space-y-4 text-left text-left"><h4 className="text-white font-bold text-xs uppercase tracking-widest leading-none mb-1 text-left">ติดตามเรา</h4><div className="flex space-x-4">{['FB', 'LN', 'LI'].map(s => <div key={s} className="w-10 h-10 rounded-full border border-white/10 flex items-center justify-center hover:bg-white/10 transition-all cursor-pointer text-[10px] font-bold">{s}</div>)}</div></div>
        </div>
        <div className="max-w-7xl mx-auto px-6 mt-16 pt-8 border-t border-white/5 text-center text-slate-600 text-[10px] uppercase font-bold tracking-widest">© 2024 Park Innovation Plus Co., Ltd. All Rights Reserved.</div>
      </footer>

      {/* AI Chat Assistant */}
      <div className="fixed bottom-8 right-8 z-[90] flex flex-col items-end space-y-4">
        <div className={`w-[350px] md:w-[400px] h-[500px] bg-[#111827] border border-white/10 rounded-[24px] shadow-3xl flex flex-col overflow-hidden transition-all duration-500 transform ${isChatOpen ? 'opacity-100 translate-y-0 scale-100' : 'opacity-0 translate-y-12 scale-90 pointer-events-none'}`}>
          <div className="p-5 bg-gradient-to-r from-slate-800 to-[#0A192F] border-b border-white/5 flex justify-between items-center text-left">
            <div className="flex items-center space-x-3 text-left text-left text-left"><div className="w-10 h-10 bg-white/5 rounded-full flex items-center justify-center border border-blue-400/30"><BrandLogo className="w-6 h-6" /></div><div><div className="text-sm font-bold text-white leading-none text-left">AI Support</div><div className="text-[10px] text-blue-400 mt-1 flex items-center text-left"><span className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-pulse mr-1.5"></span>Online</div></div></div>
            <button onClick={() => setIsChatOpen(false)} className="text-slate-400 hover:text-white p-1"><X size={20} /></button>
          </div>
          <div className="flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar text-left bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] text-left text-left text-left">
            {messages.map((msg, i) => (
              <div key={i} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                <div className={`max-w-[85%] p-3.5 rounded-2xl text-sm leading-relaxed ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-tr-none shadow-lg' : 'bg-white/5 text-slate-200 border border-white/5 rounded-tl-none text-left'}`}>{msg.text}</div>
              </div>
            ))}
            {isTyping && <div className="flex justify-start text-left text-left"><div className="bg-white/5 p-3.5 rounded-2xl border border-white/5 rounded-tl-none flex items-center space-x-1.5"><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce"></div><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-100"></div><div className="w-1.5 h-1.5 bg-blue-400 rounded-full animate-bounce delay-200"></div></div></div>}
            <div ref={chatEndRef} />
          </div>
          <form onSubmit={handleSendMessage} className="p-4 border-t border-white/5 bg-[#0A192F]/50 backdrop-blur-md text-left">
            <div className="relative flex items-center"><input type="text" placeholder="สอบถามข้อมูลที่นี่..." className="w-full bg-white/5 border border-white/10 rounded-full pl-5 pr-14 py-3 text-sm text-white focus:outline-none focus:border-blue-400 transition-all text-left" value={inputText} onChange={(e) => setInputText(e.target.value)} /><button type="submit" className="absolute right-2 w-10 h-10 bg-slate-200 text-[#0A192F] rounded-full flex items-center justify-center hover:bg-white active:scale-95 disabled:opacity-50" disabled={!inputText.trim() || isTyping}><Send size={18} /></button></div>
          </form>
        </div>
        <button onClick={() => setIsChatOpen(!isChatOpen)} className={`w-16 h-16 bg-gradient-to-br from-slate-200 to-slate-400 text-[#0A192F] rounded-full shadow-3xl flex items-center justify-center transform transition-all hover:scale-110 active:scale-95 group relative ${isChatOpen ? 'rotate-90' : ''}`}>
          {isChatOpen ? <X size={28} /> : <MessageCircle size={32} />}
          {!isChatOpen && <div className="absolute -top-12 right-0 bg-white text-[#0A192F] px-4 py-2 rounded-xl text-[11px] font-bold opacity-0 group-hover:opacity-100 transition-all shadow-lg translate-y-2 group-hover:translate-y-0">คุยกับเราตอนนี้!<div className="absolute -bottom-1 right-6 w-2 h-2 bg-white rotate-45"></div></div>}
        </button>
      </div>

      <style dangerouslySetInnerHTML={{ __html: `
        @keyframes bounce-slow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-bounce-slow { animation: bounce-slow 4s ease-in-out infinite; }
        html { scroll-behavior: smooth; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 10px; }
      `}} />
    </div>
  );
};

export default App;

